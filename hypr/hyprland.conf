###############
# ОСНОВНОЕ    #
###############

# === Переменные окружения (порталы/Wayland/кросс-киты) ===
env = XDG_CURRENT_DESKTOP,Hyprland           # сообщает «я Hyprland» порталам/китам
env = XDG_SESSION_TYPE,wayland
env = QT_QPA_PLATFORM,wayland
env = GDK_BACKEND,wayland,x11                 # GTK: Wayland приоритетно, откат на X11
# Для виртуалок/кривых GPU-композиторов можно временно включать курсор в софте:
# env = WLR_NO_HARDWARE_CURSORS,1

# === Монитор (авто) ===
monitor=,preferred,auto,1

# === Мои приложения (замените при желании) ===
$terminal = foot
$fileManager = thunar        # можете поставить dolphin, если любите KDE
$menu = wofi --show drun     # или fuzzel, rofi-wayland и т.д.

#################
# АВТОЗАПУСК    #
#################

# Пробрасываем переменные в systemd --user (требуется для xdg-portal/служб)
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Полезные сервисы «на сессию»
exec-once = waybar
exec-once = hyprpaper
exec-once = hypridle
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

#########################
# ВНЕШНИЙ ВИД / ЭФФЕКТЫ #
#########################

general {
  gaps_in = 5
  gaps_out = 20
  border_size = 2
  col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
  col.inactive_border = rgba(595959aa)
  layout = dwindle                                       # динамическая плитка
  allow_tearing = false
}

decoration {
  rounding = 8
  active_opacity = 0.95
  inactive_opacity = 0.90

  shadow { enabled = true; range = 4; render_power = 3; color = rgba(00000099) }

  blur {                                                 # аккуратный блюр
    enabled = true
    size = 8
    passes = 2
    vibrancy = 0.15
  }
}

animations {
  enabled = true
  bezier = easeOutQuint, 0.23,1, 0.32,1
  animation = windows,   1, 4.8, easeOutQuint
  animation = layers,    1, 3.8, easeOutQuint
  animation = fade,      1, 3.0, easeOutQuint
  animation = workspaces,1, 1.8, easeOutQuint, fade
}

# Быстрый тумблер «режим игры»: отключаем тяжёлые эффекты (жмём Mod+B)
bind = SUPER, B, exec, hyprctl keyword decoration:blur:enabled false; hyprctl keyword decoration:shadow:enabled false; hyprctl keyword animations:enabled false
# Возврат эффектов (Mod+Shift+B)
bind = SUPER SHIFT, B, exec, hyprctl keyword decoration:blur:enabled true; hyprctl keyword decoration:shadow:enabled true; hyprctl keyword animations:enabled true

#############
# ВВОД      #
#############

input {
  kb_layout = us,ru                      # двухраскладочный ввод
  kb_options = grp:alt_shift_toggle      # Alt+Shift — смена раскладки
  follow_mouse = 1
  sensitivity = 0
  touchpad { natural_scroll = true }
}

###################
# ГОРЯЧИЕ КЛАВИШИ #
###################

$mainMod = SUPER

# Базовые
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, Q, killactive,
bind = $mainMod, M, exit,
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, R, exec, $menu
bind = $mainMod, V, togglefloating,
bind = $mainMod, L, exec, loginctl lock-session   # ручная блокировка по Super+L

# Навигация
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d

# Рабочие столы 1..10
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Перемещение окна на рабочие столы (с зажатым Shift)
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Мышью: перемещение/ресайз при зажатом Mod
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Скриншоты (grim+slurp): весь экран и выделение
bind = , Print, exec, grim - | wl-copy
# выделенная область (проще и надёжнее, чем через xargs)
bind = SHIFT, Print, exec, grim -g "$(slurp)" - | wl-copy
# Медиа/яркость (нужны playerctl/brightnessctl)
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,        exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl  = ,XF86AudioPlay,        exec, playerctl play-pause
bindl  = ,XF86AudioNext,        exec, playerctl next
bindl  = ,XF86AudioPrev,        exec, playerctl previous
bindel = ,XF86MonBrightnessUp,   exec, brightnessctl set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl set 5%-

########################
# ПРАВИЛА ДЛЯ ОКОН     #
########################

# Игры/Steam/gamescope — поменьше «визуальной тряски»
windowrulev2 = noanim,class:^(steam_app_.*)$
windowrulev2 = nofocus,class:^(steam)$,title:^(Friends List)$
windowrulev2 = float,class:^(steam)$,title:^(Steam Settings)$
windowrulev2 = noanim,class:^(gamescope)$
# Пример: терминал всегда плиточный (на всякий случай снимаем float)
windowrulev2 = tile,class:^(foot)$

# Полезно для XWayland-тянучек
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Лейауты
dwindle { pseudotile = true; preserve_split = true }
 # свой фон покажем через hyprpaper
misc { disable_hyprland_logo = true; force_default_wallpaper = 0 } 
